<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cloud TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<style>

/* ===== GENERAL ===== */
body{
    margin:0;
    background:#0e0e0e;
    color:#fff;
    font-family:Arial,Helvetica,sans-serif;
}

/* ===== CHANNEL GRID ===== */
.file-container{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
    gap:20px;
    padding:20px;
}

.directory-item{
    background:#1b1b1b;
    border-radius:12px;
    padding:15px;
    text-align:center;
    transition:.3s;
    cursor:pointer;
}

.directory-item:hover{
    transform:scale(1.05);
    box-shadow:0 15px 25px rgba(0,0,0,.6);
}

.directory-item img{
    width:100px;
    height:100px;
    object-fit:contain;
}

.directory-item b{
    display:block;
    margin-top:10px;
    font-weight:400;
}

/* ===== PLAYER MODAL ===== */
.player-modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.85);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:9999;
}

.player-container{
    width:95%;
    max-width:900px;
    background:#000;
    border-radius:14px;
    overflow:hidden;
}

/* Video */
.player-container iframe{
    width:100%;
    height:480px;
    background:#000;
}

/* ===== CONTROLS ===== */
.controls-row{
    display:flex;
    justify-content:space-around;
    align-items:center;
    padding:12px;
    background:linear-gradient(to right,#111,#222);
}

.controls-row button{
    background:none;
    border:none;
    color:#fff;
    font-size:18px;
    padding:10px 14px;
    border-radius:8px;
    transition:.3s;
}

.controls-row button:hover{
    background:rgba(255,255,255,.15);
}

.close-btn{color:#ff4d4d}

/* Mobile */
@media(max-width:768px){
    .player-container iframe{height:260px}
}

</style>
</head>

<body>

<!-- CHANNEL LIST -->
<div id="app" class="file-container"></div>

<!-- PLAYER POPUP -->
<div id="playerModal" class="player-modal">
    <div class="player-container">
        <iframe id="playerFrame"
            frameborder="0"
            allow="autoplay; encrypted-media; picture-in-picture"
            allowfullscreen></iframe>

        <div class="controls-row">
            <button onclick="seek(-10)"><i class="fas fa-step-backward"></i></button>
            <button id="playPauseBtn" onclick="togglePlay()"><i class="fas fa-pause"></i></button>
            <button onclick="seek(10)"><i class="fas fa-step-forward"></i></button>
            <button id="muteBtn" onclick="toggleMute()"><i class="fas fa-volume-up"></i></button>
            <button onclick="openFullscreen()"><i class="fas fa-expand"></i></button>
            <button class="close-btn" onclick="closePlayer()"><i class="fas fa-times"></i></button>
        </div>
    </div>
</div>

<!-- CHANNEL DATA -->
<script>
function getData(){
    fetch("https://raw.githubusercontent.com/Shubhamkur/Tv/refs/heads/main/tvid")
    .then(res=>res.json())
    .then(data=>{
        let html="";
        data.forEach(item=>{
            html+=`
            <div class="directory-item" onclick="openPlayer('https://tv4go.pages.dev/?id=${item.id}')">
                <img src="${item.logo}">
                <b>${item.name}</b>
            </div>`;
        });
        document.getElementById("app").innerHTML=html;
    });
}
getData();
</script>

<!-- PLAYER CONTROLS -->
<script>
let isMuted=false;
let isPlaying=true;

function openPlayer(url){
    const modal=document.getElementById("playerModal");
    const frame=document.getElementById("playerFrame");
    frame.src=url+"&autoplay=1";
    modal.style.display="flex";
}

function closePlayer(){
    document.getElementById("playerFrame").src="";
    document.getElementById("playerModal").style.display="none";
}

function togglePlay(){
    isPlaying=!isPlaying;
    document.getElementById("playPauseBtn").innerHTML=
        isPlaying?'<i class="fas fa-pause"></i>':'<i class="fas fa-play"></i>';
}

function toggleMute(){
    isMuted=!isMuted;
    document.getElementById("muteBtn").innerHTML=
        isMuted?'<i class="fas fa-volume-mute"></i>':'<i class="fas fa-volume-up"></i>';
}

function seek(sec){
    alert("Seek "+sec+" seconds (stream dependent)");
}

function openFullscreen(){
    const iframe=document.getElementById("playerFrame");
    if(iframe.requestFullscreen) iframe.requestFullscreen();
}
</script>

</body>
</html>
